# 架构概述

了解 yflow 的整体技术架构。

## 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                      yflow                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────────┐    ┌──────────────────┐              │
│  │   Admin Frontend │    │      CLI         │              │
│  │   (Vue 3 + TS)   │    │   (Bun + TS)     │              │
│  └────────┬─────────┘    └────────┬─────────┘              │
│           │                       │                         │
│           └───────────┬───────────┘                         │
│                       ▼                                     │
│           ┌─────────────────────┐                           │
│           │   REST API          │                           │
│           │   (Go + Gin)        │                           │
│           └──────────┬──────────┘                           │
│                      │                                      │
│          ┌───────────┴───────────┐                          │
│          ▼                       ▼                          │
│  ┌──────────────┐       ┌──────────────┐                   │
│  │    MySQL     │       │    Redis     │                   │
│  │  (主数据)    │       │   (缓存)     │                   │
│  └──────────────┘       └──────────────┘                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 技术栈

### 后端 (admin-backend)

| 技术 | 用途 |
|------|------|
| **Go** | 开发语言 |
| **Gin** | Web 框架 |
| **GORM** | ORM 框架 |
| **MySQL** | 主数据库 |
| **Redis** | 缓存和会话 |
| **Uber FX** | 依赖注入 |
| **JWT** | 认证 |

### 前端 (admin-frontend)

| 技术 | 用途 |
|------|------|
| **Vue 3** | UI 框架 |
| **TypeScript** | 类型安全 |
| **Pinia** | 状态管理 |
| **TanStack Vue Query** | 数据获取 |
| **Element Plus** | UI 组件库 |
| **Axios** | HTTP 客户端 |

### CLI (cli)

| 技术 | 用途 |
|------|------|
| **Bun** | 运行时 |
| **TypeScript** | 开发语言 |
| **Commander** | CLI 框架 |

## 数据流

### 用户操作流程

```
用户 → 前端 → API → 数据库 → 缓存
                 ↓
            返回响应
```

### CLI 同步流程

```
本地文件 → CLI → API → 数据库
                    ↓
              缓存更新
                    ↓
返回结果 → CLI → 本地文件
```

## 目录结构

```
yflow/
├── admin-backend/          # Go 后端
│   ├── internal/
│   │   ├── api/           # HTTP 处理
│   │   ├── config/        # 配置
│   │   ├── container/     # DI 容器
│   │   ├── domain/        # 领域模型
│   │   ├── dto/           # 数据传输
│   │   ├── repository/    # 数据访问
│   │   ├── service/       # 业务逻辑
│   │   └── utils/         # 工具函数
│   └── tests/             # 测试
│
├── admin-frontend/         # Vue 前端
│   ├── src/
│   │   ├── layouts/       # 布局组件
│   │   ├── router/        # 路由
│   │   ├── services/      # API 服务
│   │   ├── stores/        # 状态管理
│   │   ├── types/         # 类型定义
│   │   └── views/         # 页面组件
│   └── tests/             # 测试
│
├── cli/                    # CLI 工具
│   ├── src/
│   │   ├── commands/      # 命令实现
│   │   ├── api.ts         # API 客户端
│   │   ├── config.ts      # 配置
│   │   └── scanner.ts     # 文件扫描
│   └── tests/             # 测试
│
└── docs/                   # 文档
```

## 下一步

- [后端架构详解 →](/architecture/backend)
- [前端架构详解 →](/architecture/frontend)
- [CLI 架构详解 →](/architecture/cli)
